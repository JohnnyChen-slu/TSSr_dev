library(TSSr)
library(roxygen2)
install.packages(roxygen2)
install.packages("roxygen2")
library(roxygen2)
devtools()
install.packages("devtools")
devtools::
devtools()
?devtools
library(devtools)
devtools.name
getwd()
setwd("/Users/zhaolianlu/Desktop/Github")
getwd()
list.files()
devtools::create("test.pacakge")
list.files()
setwd("/Users/zhaolianlu/Google Drive/CAGE/TSSr_package/data")
inputFiles <- c("S01.sorted.bam","S02.sorted.bam","S03.sorted.bam","S04.sorted.bam")
myTSSr <- new("TSSr", genomeName = "BSgenome.Scerevisiae.UCSC.sacCer3"
,inputFiles = inputFiles
,inputFilesType= "bam"
,sampleLabels = c("SL01","SL02","SL03","SL04")
,sampleLabelsMerged = c("control","treat")
,mergeIndex = c(1,1,2,2)
,refSource = "saccharomyces_cerevisiae.SGD.gff"
,organismName = "saccharomyces cerevisiae")
getTSS(myTSSr)
library(TSSr)
setwd("/Users/zhaolianlu/Google Drive/CAGE/TSSr_package/data")
inputFiles <- c("S01.sorted.bam","S02.sorted.bam","S03.sorted.bam","S04.sorted.bam")
myTSSr <- new("TSSr", genomeName = "BSgenome.Scerevisiae.UCSC.sacCer3"
,inputFiles = inputFiles
,inputFilesType= "bam"
,sampleLabels = c("SL01","SL02","SL03","SL04")
,sampleLabelsMerged = c("control","treat")
,mergeIndex = c(1,1,2,2)
,refSource = "saccharomyces_cerevisiae.SGD.gff"
,organismName = "saccharomyces cerevisiae")
getTSS(myTSSr)
myTSSr
inputFiles
myTSSr
x <- myTSSr@TSSrawMatrix
x
y <- x[,1:4]
y
y <- y[, SL01 >0]
y
y <- x[,1:4]
y
y <- y[SL01 >0,]
y
devtools::use_data(y)
y
y <- x[,1:4]
y <- y[SL01 >0,]
chr <- y$chr
pos <- y$pos
strand <- y$strand
tags <- y$SL01
getwd()
setwd("~/Desktop/Github/TSSr/data")
save(chr, pos, strand, tags, file = "SL01.rda")
x
setDF(x)
library(data.table)
setDF(x)
x[1:4,]
setDT(x)
x
y <- x[, .SD, .SDcols = c(chr, pos, strand, SL01)]
x
y <- x[, .SD, .SDcols = c(chr, pos, strand, "SL01")]
y <- x[, .SD, .SDcols = c("chr", "pos", "strand", "SL01")]
y
y <- y[SL01 >0,]
y
getwd()
y <- x[, .SD, .SDcols = c("chr", "pos", "strand", "SL01")]
y <- y[SL01 >0,]
chr <- y$chr
pos <- y$pos
strand <- y$strand
tags <- y$SL01
save(chr, pos, strand, tags, file = "SL01.rda")
samples <- c("SL01","SL02","SL03","SL04")
samples
my.sample
my.sample <- samples[1]
y <- x[, .SD, .SDcols = c("chr", "pos", "strand", my.sample)]
y
y <- y[my.sample >0,]
y
y[,.SD >0, .SDcols = my.sample]
y[y[,.SD >0, .SDcols = my.sample]]
y[y[,.SD >0, .SDcols = my.sample],]
y
setnames(y, colnames(y)[4], "tags")
y
samples <- c("SL01","SL02","SL03","SL04")
##1
for (my.sample in samples){
y <- x[, .SD, .SDcols = c("chr", "pos", "strand", my.sample)]
setnames(y, colnames(y)[4], "tags")
y <- y[tags >0,]
chr <- y$chr
pos <- y$pos
strand <- y$strand
tags <- y$tags
save(chr, pos, strand, tags, file = paste(my.sample, "rda",sep = ".")
}
my.sample
y <- x[, .SD, .SDcols = c("chr", "pos", "strand", my.sample)]
setnames(y, colnames(y)[4], "tags")
y <- y[tags >0,]
chr <- y$chr
pos <- y$pos
strand <- y$strand
tags <- y$tags
save(chr, pos, strand, tags, file = paste(my.sample, "rda",sep = ".")
}
save(chr, pos, strand, tags, file = paste(my.sample, "rda",sep = ".")
)
for (my.sample in samples){
y <- x[, .SD, .SDcols = c("chr", "pos", "strand", my.sample)]
setnames(y, colnames(y)[4], "tags")
y <- y[tags >0,]
chr <- y$chr
pos <- y$pos
strand <- y$strand
tags <- y$tags
save(chr, pos, strand, tags, file = paste(my.sample, "rda",sep = "."))
}
library(TSSr)
getwd()
install.packages("pkgdown")
usethis::use_pkgdown()
pkgdown::build_site()
pkgdown::build_site()
library("devtools")
library("roxygen2")
document(TSSr)
library(TSSr)
document("TSSr")
check_doc("TSSr")
